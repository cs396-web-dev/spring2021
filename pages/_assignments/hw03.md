---
layout: assignment-two-column
title: "Web Client: JS Implementation"
abbreviation: HW3
type: homework
due_date: 2021-05-05
ordering: 3
draft: 1
points: 15
---

 {:.blockquote-no-margin}
> ## Collaboration and Code Sharing Policy
> Same as [Homework 1](hw01/)

For the next two homeworks (HW3 & HW4), you are going to build a graphical user interface for your Dr. Who REST API:
* In Homework 3, you are going to program the JavaScript interactions. 
* In Homework 4, you are going to design the look and feel of your app.

## Part 1: Background Information

> ### Readings
> * Fetch API
> * Event Handlers

## Part 2: Set Up Your Files
Download `doctor-who-ui.zip`, which is a modified version of the `hw02-cs396.zip`. 

### Changelog
The following changes have been made:
1. There is a new `config/data.json` with the same doctors and companions, but new data fields have been added:
   * The doctor object now has an `image_url` (to store an image of each doctor) and an `ordering` field (so that we can easily sort the doctors chronologically).
   * The companion object also has an `image_url` field.
2. The `src/schemas/Doctor.js` and `src/schemas/Companion.js` schemas have been updated to accommodate the (optional) new fields.
3. The `index.js` is now listening for static media requests in the `public` directory, which is controlled by this line of code: `app.use(express.static('public'))`

### Configure your new server
Please complete the following steps to configure your new server:
1. Copy your `.env` file into the root of your `doctor-who-ui` directory.
2. Copy your completed `routes.js` from homework 2 into the `src` directory (replacing the current one).
3. Install the dependencies `npm install`
4. Populate your DB: `npm run populate`
5. Run your server: `npm start`
6. Run your tests again (they should all still pass if they were passing before). Note that there are a few tests that may failing because of the modified schemas. You will fix this in Part 3.1 (below).

## Part 3: Your Assignment (13 Points)
In the `public` directory, there are three files -- `index.html`, `style.css` and `main.js` -- which will serve as the "front end" of your Doctor Who website. To view these files, navigate to: <a href="http://localhost:8081" target="_blank">http://localhost:8081</a>

### 1. Modify your routes.js file
#### A. Update POST and PATCH routes so that they accept the new attributes (1 point)

Since the `Doctor.js` and `Companion.js` schemas have changed, you may need to update the following `POST` and `PATCH` endpoints (depending how you implemented them in HW2)...

* /doctors (POST)
* /doctors/:id (PATCH)
* /companions (POST)
* /companions/:id (PATCH)

...so that they allow an optional `image_url` attribute to be saved to the database. In addition, for the doctors endpoints, an optional `ordering` attribute should also be accepted.

#### B. Add sorting to the /doctors GET endpoint (0.5 points)
You will also modify the `/doctors` GET endpoint (in `routes.js`) so that it will return the list of doctors sorted by the `ordering` attribute. So make sure you append the [.sort()](https://mongoosejs.com/docs/api/query.html#query_Query-sort) function to the end of you `find()` query so that the results are returned in order:

```js
Doctor
    .find({})
    .sort('ordering')  // sort by the "ordering" attribute
    .then(...)
```

#### C. Verify your changes
When you're done, run the tests and they should all pass!

### 2. List the Doctors
Panel on left-hand side.

### 3. Show the Doctors and their Companions

### 4. Forms
* Allow the user to edit a doctor
   * Error handling implemented
* Allow the user to delete a doctor
* Allow the user to add a new doctor
   * Error handling implemented

### 5. Extra Credit (Up to X Points)
* Allow the user to edit a companion
* Allow the user to delete a companion
* Allow the user to add a new a companion for the specific doctor
* Allow the user to favorite a doctor or companion
* Allow the user to view their favorite doctors / companions

## Part 4: Deploy your app to Heroku (2 Points)
You will use the same process as used in [Homework 2](hw02#part4), except you will be committing and deploying your files in your `doctor-who-ui` folder.

## What to Turn In
### Verify that you're done

{:.checkbox-list}
<table>
    <tr>
        <th>1.5 pts</th>
        <td>routes.js</td>
        <td>The routes.js file was updated according to the instructions in part 1 (run the tests and they should pass). 
        </td>
    </tr>
    <tr>
        <th>0 pts</th>
        <td>Doctor List</td>
            <td>A list of doctors appears on the left-hand side when the page loads. 
        </td>
    </tr>
    <tr>
        <th>0 pts</th>
        <td>Doctor Detail</td>
        <td>When you click any of the doctors, details about the doctor and the doctor's companions appear in the main panel (see video). 
        </td>
    </tr>
    <tr>
        <th>0 pts</th>
        <td>Create Doctor</td>
        <td> 
            <ul>
                <li>Clicking the add doctor button shows a "Create Doctor" form.</li>
                <li>There is data validation.</li>
                <li>When the form is submitted, a valid `POST` request is sent to the /`doctors/` endpoint. </li>
            </ul>
        </td>
    </tr>
    <tr>
        <th>0 pts</th>
        <td>Edit Doctor</td>
        <td> 
            <ul>
                <li>Clicking the edit button next to the doctor shows a pre-populated "Edit" form.</li>
                <li>There is data validation. </li>
                <li>When the form is submitted, a valid `PATCH` request is sent to the /`doctors/:id` endpoint.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th>0 pts</th>
        <td>Delete Doctor</td>
        <td>
            <ul>
                <li>Uses the confirm function to make sure the user really wants to do this. </li>
                <li>If confirmed, a valid `DELETE` request is sent to the /`doctors/:id` endpoint.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <th>0 pts</th>
        <td>Feedback / Error Handling<br>For the `PATCH`, `POST`, and `DELETE` requests:</td>
        <td>
            <ul>
                <li>
                    If a success response is received back from the server, the doctor list (left-hand side) should be updated to reflect the change.
                </li>
                <li>
                    If an error response is received, give the user some feedback as to what went wrong. 
                </li>
            </ul>
        </td>
    </tr>
</table>


### Submit to Canvas
When you're done, you should submit the following to Canvas:

1. A zip file that contains your `public` directory and your updated `routes.js` file.
1. A link to your live Heroku web server (just paste the link in as a comment on Canvas).
1. A list of your collaborators, if applicable (just list them in the comments section of Canvas).
1. Also, tell us if you attempted the extra credit (totally optional).
